{% extends "base.html" %}
{% block title %}Liste des Patients - DiabetoWeb{% endblock %}
{% block content %}
<h2>Mes Patients</h2>

{% if patients|length == 0 %}
  <p>Aucun patient trouvé.</p>
{% else %}
  <p><strong>{{ percent }}%</strong> des patients sont diabétiques.</p>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Nom</th>
        <th>Âge</th>
        <th>Sexe</th>
        <th>Glucose</th>
        <th>BMI</th>
        <th>Pression</th>
        <th>Pedigree</th>
        <th>Résultat</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for patient in patients %}
      <tr>
        <td>{{ patient.name }}</td>
        <td>{{ patient.age }}</td>
        <td>{{ patient.sex }}</td>
        <td>{{ patient.glucose }}</td>
        <td>{{ patient.bmi }}</td>
        <td>{{ patient.bloodpressure }}</td>
        <td>{{ patient.pedigree }}</td>
        <td>
          {% if patient.result == 1 %}
            <span class="badge bg-danger">Diabétique</span>
          {% else %}
            <span class="badge bg-success">Non diabétique</span>
          {% endif %}
        </td>
        <td>
          <a href="/delete/{{ patient.id }}" class="btn btn-sm btn-outline-danger"
             onclick="return confirm('Voulez-vous vraiment supprimer ce patient ?');">Supprimer</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
{% endif %}

<a href="/add" class="btn btn-primary">Ajouter un nouveau patient</a>
{% endblock %}
